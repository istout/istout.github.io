<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Map with KML</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="leaflet_kml.css" /> <!--style sheet for leaflet_kml.html-->

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-omnivore@0.3.4/leaflet-omnivore.min.js"></script> <!--Loading in omnivore plugin to read kml files -->

</head>

<body>
    <h1>A Map of the places I've visited</h1>
    <p style="text-align: center;">Each of these polygons is an individual KML file that I loaded in.</p>
    <h1></h1>
    
    <div id="map"></div>
    <script src="leaflet_kml.js"></script> <!--This has to come after the map is loaded in. It can't go in the head section-->

    <h3></h3>
    

    <p>I found a online directory with a downloadable KML of every state and country. click here to view:  
        <a href="// https://mapme.notion.site/402e1700c2c7496d88151b755d465428?v=814ee4b037114acc9789b9913a2b74d8">Notion MapMe</a>  </p>
    <p>Below is what a kml file looks like: </p>
       
    <div style="overflow: auto; max-height: 200px; width: 70%; margin:0 auto; border: 1px solid #ccc; padding: 10px;">
       
        <code>
            <?xml version='1.0' encoding='utf-8'?>
            <kml xmlns="http://www.opengis.net/kml/2.2">
                <Document>
                    <Schema id="u" name="u">
                        <SimpleField name="gid" type="int"><displayName>gid</displayName></SimpleField>
                        <SimpleField name="arealand" type="string"><displayName>arealand</displayName></SimpleField>
                        <SimpleField name="division" type="int"><displayName>division</displayName></SimpleField>
                        <SimpleField name="intptlat" type="double"><displayName>intptlat</displayName></SimpleField>
                        <SimpleField name="name" type="string"><displayName>name</displayName></SimpleField>
                        <SimpleField name="objectid" type="int"><displayName>objectid</displayName></SimpleField>
                        <SimpleField name="areawater" type="string"><displayName>areawater</displayName></SimpleField>
                        <SimpleField name="intptlon" type="double"><displayName>intptlon</displayName></SimpleField>
                        <SimpleField name="oid" type="string"><displayName>Oid</displayName></SimpleField>
                        <SimpleField name="funcstat" type="string"><displayName>funcstat</displayName></SimpleField>
                        <SimpleField name="centlon" type="double"><displayName>centlon</displayName></SimpleField>
                        <SimpleField name="stusab" type="string"><displayName>stusab</displayName></SimpleField>
                        <SimpleField name="state" type="string"><displayName>state</displayName></SimpleField>
                        <SimpleField name="statens" type="string"><displayName>statens</displayName></SimpleField>
                        <SimpleField name="centlat" type="double"><displayName>centlat</displayName></SimpleField>
                        <SimpleField name="basename" type="string"><displayName>basename</displayName></SimpleField>
                        <SimpleField name="mtfcc" type="string"><displayName>mtfcc</displayName></SimpleField>
                        <SimpleField name="region" type="int"><displayName>region</displayName></SimpleField>
                        <SimpleField name="lsadc" type="string"><displayName>lsadc</displayName></SimpleField>
                        <SimpleField name="geoid" type="string"><displayName>geoid</displayName></SimpleField>
                    </Schema>
                    <Placemark><name>2</name>
                    <Polygon>  
                        <outerBoundaryIs>
                            <LinearRing>
                                <coordinates>
                                    -114.047026,39.9060970003 -114.050521,38.4961169998 -114.049325,38.2660599998 -114.0505,37.9533410002 -114.049613,37.8235409997 -114.048302,37.8094240002 -114.051651,37.75165 -114.052867,37.5882699999 -114.051626,37.3039050001 -114.052541,37.1128809997 -114.050052,37.0001909999 -111.150576,37.0009499998 -110.625691,37.0037249998 -110.490299,37.0036279998 -110.469733,36.997657 -109.045172,36.998977 -109.04564,37.3597230002 -109.041572,37.5621380003 -109.042572,38.1570159998 -109.042835,38.1662679997 -109.060204,38.2782379997 -109.059824,38.7147459998 -109.054022,38.877161 -109.051166,39.142603 -109.051245,40.441599 -109.047767,40.6098790002 -109.050026,41.0006909998 -109.232505,41.0021069998 -109.543697,40.9983960001 -110.086964,40.9971279998 -110.274112,40.9948170001 -111.046815,40.9978750001 -111.046714,42.001702 -112.153848,41.9972260003 -112.173148,42.001515 -112.705684,42.0001509997 -113.249781,41.9959689998 -113.873349,41.9881819999 -114.041477,41.9938729997 -114.039461,41.718874 -114.042874,40.795071 -114.046099,40.4018480002 -114.047026,39.9060970003 
                                </coordinates>
                            </LinearRing>
                        </outerBoundaryIs>
                    </Polygon>
                    <ExtendedData>
                        <SchemaData schemaUrl="u">
                            <SimpleData name="gid">2</SimpleData>
                            <SimpleData name="arealand">-1862814329</SimpleData>
                            <SimpleData name="division">8</SimpleData>
                            <SimpleData name="intptlat">39.3349925</SimpleData>
                            <SimpleData name="name">Utah</SimpleData>
                            <SimpleData name="objectid">24</SimpleData>
                            <SimpleData name="areawater">-1590438778</SimpleData>
                            <SimpleData name="intptlon">-111.6563326</SimpleData>
                            <SimpleData name="oid">-1897836972</SimpleData>
                            <SimpleData name="funcstat">A</SimpleData>
                            <SimpleData name="centlon">-111.6703458</SimpleData>
                            <SimpleData name="stusab">UT</SimpleData>
                            <SimpleData name="state">49</SimpleData>
                            <SimpleData name="statens">01455989</SimpleData>
                            <SimpleData name="centlat">39.3063102</SimpleData>
                            <SimpleData name="basename">Utah</SimpleData>
                            <SimpleData name="mtfcc">G4000</SimpleData>
                            <SimpleData name="region">4</SimpleData>
                            <SimpleData name="lsadc">00</SimpleData>
                            <SimpleData name="geoid">49</SimpleData>
                        </SchemaData>
                        </ExtendedData>              
                    </Placemark>
                </Document>
            </kml>
        </code>     
          
</div>

<h3></h3>
<p>To load in the KML file, I used the plugin "omnivore". This is what I had to put in my javascript for it to read it in.  </p>
    <div style="overflow: auto; max-height:200px; width: 70%; margin:0 auto; border: 1px solid #ccc; padding: 10px;">
       
        <code>

          
            // Initialize the KML layer and add it to the map when ready
            const kmlUrls = [
                'KML_files/Utah.kml',
                'KML_files/KML_import.kml',
                'KML_files/Alabama.kml',
                'KML_files/Alaska.kml',
            ];

            kmlUrls.forEach(function(url) {
                omnivore.kml(url).on('ready', function() {
                   //kmlLayer = this;
                    this.addTo(map);
                    }); 
                }).on('error', function(e) {
                    console.error('Error loading KML:', e);
            });
        </code> 
        
    </div>

</body>
</html>